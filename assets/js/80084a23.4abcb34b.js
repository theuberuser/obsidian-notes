"use strict";(globalThis.webpackChunkobsidian_notes=globalThis.webpackChunkobsidian_notes||[]).push([[5175],{2777(n,e,s){s.r(e),s.d(e,{assets:()=>c,contentTitle:()=>o,default:()=>a,frontMatter:()=>d,metadata:()=>r,toc:()=>t});const r=JSON.parse('{"id":"Tech Notes/USE Method checklist","title":"USE Method checklist","description":"Composed with ChatGPT","source":"@site/docs/Tech Notes/USE Method checklist.md","sourceDirName":"Tech Notes","slug":"/Tech Notes/USE Method checklist","permalink":"/obsidian-notes/Tech Notes/USE Method checklist","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"defaultSidebar","previous":{"title":"Terraform","permalink":"/obsidian-notes/Tech Notes/Terraform stuff"},"next":{"title":"Computers & Hardware","permalink":"/obsidian-notes/Tech Notes/computers-and-hardware/"}}');var i=s(4848),l=s(8453);const d={},o=void 0,c={},t=[{value:"\ud83d\udd30 Quick Triage (Run First)",id:"-quick-triage-run-first",level:2},{value:"1\ufe0f\u20e3 CPU",id:"1\ufe0f\u20e3-cpu",level:2},{value:"Utilization",id:"utilization",level:3},{value:"Saturation",id:"saturation",level:3},{value:"Errors",id:"errors",level:3},{value:"2\ufe0f\u20e3 Memory",id:"2\ufe0f\u20e3-memory",level:2},{value:"Utilization",id:"utilization-1",level:3},{value:"Saturation",id:"saturation-1",level:3},{value:"Errors",id:"errors-1",level:3},{value:"3\ufe0f\u20e3 Disk / Storage",id:"3\ufe0f\u20e3-disk--storage",level:2},{value:"Utilization",id:"utilization-2",level:3},{value:"Saturation",id:"saturation-2",level:3},{value:"Errors",id:"errors-2",level:3},{value:"4\ufe0f\u20e3 Network",id:"4\ufe0f\u20e3-network",level:2},{value:"Utilization",id:"utilization-3",level:3},{value:"Saturation",id:"saturation-3",level:3},{value:"Errors",id:"errors-3",level:3},{value:"5\ufe0f\u20e3 Filesystems",id:"5\ufe0f\u20e3-filesystems",level:2},{value:"Utilization",id:"utilization-4",level:3},{value:"Saturation",id:"saturation-4",level:3},{value:"Errors",id:"errors-4",level:3},{value:"\ud83e\udde0 Rule of Thumb",id:"-rule-of-thumb",level:2},{value:"\ud83d\udea6 Common Patterns",id:"-common-patterns",level:2}];function h(n){const e={blockquote:"blockquote",br:"br",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,l.R)(),...n.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e.p,{children:"Composed with ChatGPT"}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h1,{id:"-linux-use-method--1-page-incident-checklist",children:"\ud83d\udcc4 Linux USE Method \u2014 1-Page Incident Checklist"}),"\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"USE = Utilization \u2022 Saturation \u2022 Errors"}),(0,i.jsx)(e.br,{}),"\n",(0,i.jsx)(e.strong,{children:"Goal:"})," Identify the system bottleneck ",(0,i.jsx)(e.em,{children:"before"})," debugging the application."]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h2,{id:"-quick-triage-run-first",children:"\ud83d\udd30 Quick Triage (Run First)"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"uptime\n"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"What it does:"})," Shows load average (1/5/15 min)"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Look for:"})," Load \u226b CPU count \u2192 CPU or I/O saturation"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"vmstat 1\n"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"What it does:"})," Snapshot of CPU, memory, and run queue"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsx)(e.p,{children:(0,i.jsx)(e.strong,{children:"Look for:"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.code,{children:"r"})," > CPU cores \u2192 CPU saturation"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.code,{children:"si"})," / ",(0,i.jsx)(e.code,{children:"so"})," > 0 \u2192 memory pressure"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:["High ",(0,i.jsx)(e.code,{children:"wa"})," \u2192 I/O wait"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"free -h\n"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"What it does:"})," Memory usage summary"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Look for:"})," Low ",(0,i.jsx)(e.strong,{children:"available"})," memory, swap usage"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"iostat -xz 1\n"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"What it does:"})," Per-disk utilization & latency"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Look for:"})," ",(0,i.jsx)(e.code,{children:"%util"})," \u2248 100%, high ",(0,i.jsx)(e.code,{children:"await"})]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"ip -s link\n"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"What it does:"})," Network interface counters"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Look for:"})," Packet drops or errors"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h2,{id:"1\ufe0f\u20e3-cpu",children:"1\ufe0f\u20e3 CPU"}),"\n",(0,i.jsx)(e.h3,{id:"utilization",children:"Utilization"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"top\nmpstat -P ALL 1\n"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Does:"})," Shows CPU usage overall and per core"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Look for:"})," Low ",(0,i.jsx)(e.code,{children:"%idle"}),", high ",(0,i.jsx)(e.code,{children:"%sys"}),", single hot core"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"saturation",children:"Saturation"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"vmstat 1\n"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Does:"})," Shows run queue (",(0,i.jsx)(e.code,{children:"r"}),")"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Look for:"})," ",(0,i.jsx)(e.code,{children:"r"})," consistently > CPU count"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"errors",children:"Errors"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"dmesg | grep -i cpu\n"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Does:"})," Kernel CPU messages"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Look for:"})," Throttling, machine check errors"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h2,{id:"2\ufe0f\u20e3-memory",children:"2\ufe0f\u20e3 Memory"}),"\n",(0,i.jsx)(e.h3,{id:"utilization-1",children:"Utilization"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"free -h\n"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Does:"})," RAM and swap usage"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Look for:"})," Low available memory"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"saturation-1",children:"Saturation"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"vmstat 1\n"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Does:"})," Paging activity"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Look for:"})," ",(0,i.jsx)(e.code,{children:"si"})," / ",(0,i.jsx)(e.code,{children:"so"})," > 0 (active swapping)"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"errors-1",children:"Errors"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"dmesg | grep -i oom\n"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Does:"})," OOM killer events"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Look for:"})," Processes being killed"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h2,{id:"3\ufe0f\u20e3-disk--storage",children:"3\ufe0f\u20e3 Disk / Storage"}),"\n",(0,i.jsx)(e.h3,{id:"utilization-2",children:"Utilization"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"iostat -xz 1\n"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Does:"})," Disk busy time and latency"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Look for:"})," ",(0,i.jsx)(e.code,{children:"%util"})," near 100%"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"saturation-2",children:"Saturation"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"iostat -x 1\n"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Does:"})," Disk queue depth"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Look for:"})," High ",(0,i.jsx)(e.code,{children:"avgqu-sz"}),", long ",(0,i.jsx)(e.code,{children:"await"})]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"errors-2",children:"Errors"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:'dmesg | grep -i -E "error|fail|reset"\n'})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Does:"})," Storage error logs"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Look for:"})," I/O errors, controller resets"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h2,{id:"4\ufe0f\u20e3-network",children:"4\ufe0f\u20e3 Network"}),"\n",(0,i.jsx)(e.h3,{id:"utilization-3",children:"Utilization"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"sar -n DEV 1\n"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Does:"})," Per-interface throughput"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Look for:"})," RX/TX near NIC limits"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"saturation-3",children:"Saturation"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"ss -s\n"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Does:"})," Socket summary"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Look for:"})," Large connection counts, retries"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"errors-3",children:"Errors"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"ip -s link\n"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Does:"})," NIC error counters"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Look for:"})," Dropped packets, overruns"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h2,{id:"5\ufe0f\u20e3-filesystems",children:"5\ufe0f\u20e3 Filesystems"}),"\n",(0,i.jsx)(e.h3,{id:"utilization-4",children:"Utilization"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"df -h\ndf -i\n"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Does:"})," Disk space & inode usage"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Look for:"})," 100% full disks or inodes"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"saturation-4",children:"Saturation"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"cat /proc/sys/fs/file-nr\n"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Does:"})," File descriptor usage"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Look for:"})," Near system limits"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.h3,{id:"errors-4",children:"Errors"}),"\n",(0,i.jsx)(e.pre,{children:(0,i.jsx)(e.code,{className:"language-bash",children:"dmesg | grep -i ext4\ndmesg | grep -i xfs\n"})}),"\n",(0,i.jsxs)(e.ul,{children:["\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Does:"})," Filesystem error logs"]}),"\n"]}),"\n",(0,i.jsxs)(e.li,{children:["\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"Look for:"})," Corruption, remounts"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h2,{id:"-rule-of-thumb",children:"\ud83e\udde0 Rule of Thumb"}),"\n",(0,i.jsxs)(e.blockquote,{children:["\n",(0,i.jsxs)(e.p,{children:[(0,i.jsx)(e.strong,{children:"If Utilization is high \u2192 check Saturation."}),(0,i.jsx)(e.br,{}),"\n",(0,i.jsx)(e.strong,{children:"If Saturation exists \u2192 look for Errors."}),(0,i.jsx)(e.br,{}),"\n",(0,i.jsx)(e.strong,{children:"Only then debug the application."})]}),"\n"]}),"\n",(0,i.jsx)(e.hr,{}),"\n",(0,i.jsx)(e.h2,{id:"-common-patterns",children:"\ud83d\udea6 Common Patterns"}),"\n",(0,i.jsxs)(e.table,{children:[(0,i.jsx)(e.thead,{children:(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.th,{children:"Symptom"}),(0,i.jsx)(e.th,{children:"Likely Bottleneck"})]})}),(0,i.jsxs)(e.tbody,{children:[(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"High load, idle CPU"}),(0,i.jsx)(e.td,{children:"Disk I/O"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"CPU 100%, low I/O"}),(0,i.jsx)(e.td,{children:"CPU bound"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"Swap activity"}),(0,i.jsx)(e.td,{children:"Memory pressure"})]}),(0,i.jsxs)(e.tr,{children:[(0,i.jsx)(e.td,{children:"Packet drops"}),(0,i.jsx)(e.td,{children:"Network saturation"})]})]})]}),"\n",(0,i.jsx)(e.hr,{})]})}function a(n={}){const{wrapper:e}={...(0,l.R)(),...n.components};return e?(0,i.jsx)(e,{...n,children:(0,i.jsx)(h,{...n})}):h(n)}},8453(n,e,s){s.d(e,{R:()=>d,x:()=>o});var r=s(6540);const i={},l=r.createContext(i);function d(n){const e=r.useContext(l);return r.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function o(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(i):n.components||i:d(n.components),r.createElement(l.Provider,{value:e},n.children)}}}]);